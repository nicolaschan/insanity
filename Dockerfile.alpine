FROM rust:alpine

RUN apk add build-base gcc musl-dev alsa-lib-dev openssl-dev perl cmake g++ opus-dev

ENV CC=gcc
ENV CXX=g++

WORKDIR /usr/src/insanity
COPY . .

RUN cargo install --path .

ENTRYPOINT ["insanity"]
